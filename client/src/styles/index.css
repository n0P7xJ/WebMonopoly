/* ===== BASE ===== */
*, *::before, *::after { box-sizing: border-box; margin: 0; padding: 0; }
:root {
  --bg: #1a1a2e;
  --bg2: #16213e;
  --surface: #0f3460;
  --accent: #e94560;
  --text: #eee;
  --muted: #888;
  --radius: 6px;
}
body {
  font-family: 'Inter', system-ui, sans-serif;
  background: var(--bg);
  color: var(--text);
  min-height: 100vh;
}
button {
  cursor: pointer;
  border: none;
  border-radius: var(--radius);
  padding: 8px 14px;
  font-size: .85rem;
  font-weight: 600;
  background: var(--surface);
  color: var(--text);
  transition: filter .15s;
}
button:hover { filter: brightness(1.2); }
button:disabled { opacity: .4; cursor: default; filter: none; }
input, select {
  padding: 6px 10px;
  border: 1px solid #444;
  border-radius: var(--radius);
  background: #222;
  color: var(--text);
  font-size: .85rem;
}
.btn-primary { background: var(--accent); color: #fff; }
.btn-danger { background: #c0392b; color: #fff; }
.btn-small { padding: 4px 10px; font-size: .78rem; }
.btn-tiny { padding: 2px 6px; font-size: .72rem; }
.muted { color: var(--muted); font-size: .82rem; }

/* ===== TOAST ===== */
.toast-error {
  position: fixed; top: 12px; left: 50%; transform: translateX(-50%);
  background: #c0392b; color: #fff; padding: 10px 24px;
  border-radius: var(--radius); z-index: 1000; font-weight: 600;
  animation: fadeIn .2s;
}
@keyframes fadeIn { from { opacity: 0; transform: translateX(-50%) translateY(-10px); } }

/* ===== LOBBY ===== */
.lobby {
  max-width: 560px;
  margin: 40px auto;
  padding: 30px;
  background: var(--bg2);
  border-radius: 12px;
}
.lobby h1 { text-align: center; margin-bottom: 20px; font-size: 2rem; }
.lobby-name { display: flex; gap: 10px; align-items: center; margin-bottom: 16px; }
.lobby-name input { flex: 1; }
.lobby-tabs { display: flex; gap: 4px; margin-bottom: 16px; }
.lobby-tabs button { flex: 1; padding: 10px; background: var(--surface); }
.lobby-tabs button.active { background: var(--accent); }
.lobby-create label, .lobby-join label { display: block; margin: 8px 0 4px; font-size: .85rem; color: var(--muted); }
.lobby-create input, .lobby-create select { width: 100%; margin-bottom: 4px; }
.lobby-create .btn-primary { width: 100%; margin-top: 14px; padding: 12px; font-size: 1rem; }
.house-rules { background: var(--bg); padding: 12px; border-radius: var(--radius); margin-top: 10px; }
.house-rules h3 { font-size: .9rem; margin-bottom: 8px; }
.house-rules label { display: flex; align-items: center; gap: 8px; margin: 4px 0; font-size: .82rem; }
.house-rules input[type="number"], .house-rules select { width: 80px; margin-left: auto; }

.game-list { list-style: none; }
.game-list li {
  display: flex; justify-content: space-between; align-items: center;
  padding: 10px; background: var(--surface); border-radius: var(--radius);
  margin-bottom: 6px;
}
.game-info { display: flex; gap: 10px; align-items: center; }
.game-info strong { font-size: .9rem; }
.game-actions { display: flex; gap: 6px; align-items: center; }
.game-actions input { width: 100px; }
.phase-waiting { color: #2ecc71; font-size: .78rem; }
.phase-playing { color: #f39c12; font-size: .78rem; }
.phase-finished { color: var(--muted); font-size: .78rem; }

/* ===== GAME LAYOUT ===== */
.game-layout { display: flex; flex-direction: column; height: 100vh; overflow: hidden; }
.game-top { flex-shrink: 0; }
.game-middle { display: flex; flex: 1; min-height: 0; overflow: hidden; }
.board-area { flex: 1; display: flex; justify-content: center; align-items: center; padding: 8px; overflow: auto; }
.sidebar { width: 320px; flex-shrink: 0; display: flex; flex-direction: column; gap: 4px; padding: 8px; overflow-y: auto; }

/* ===== PLAYER PANEL ===== */
.player-panel { background: var(--bg2); padding: 8px 12px; }
.panel-header { display: flex; align-items: center; gap: 12px; margin-bottom: 8px; }
.game-name { font-weight: 700; font-size: 1rem; }
.game-id { color: var(--muted); font-size: .75rem; }
.players-row { display: flex; gap: 8px; overflow-x: auto; }
.player-card {
  display: flex; gap: 8px; align-items: center;
  background: var(--surface); border-radius: var(--radius);
  padding: 6px 10px; min-width: 150px; border: 2px solid transparent;
}
.player-card.current-player { border-color: var(--accent); }
.player-card.bankrupt { opacity: .4; }
.player-card.disconnected { opacity: .6; }
.player-color { width: 12px; height: 40px; border-radius: 3px; flex-shrink: 0; }
.player-name { font-weight: 600; font-size: .82rem; white-space: nowrap; }
.player-money { font-size: .9rem; color: #2ecc71; font-weight: 700; }
.player-status { font-size: .72rem; }
.player-props-count { font-size: .72rem; color: var(--muted); }

/* ===== BOARD ===== */
.board {
  display: grid;
  grid-template-columns: 1.5fr repeat(9, 1fr) 1.5fr;
  grid-template-rows: 1.5fr repeat(9, 1fr) 1.5fr;
  width: min(95vmin, 700px);
  height: min(95vmin, 700px);
  gap: 1px;
  background: #333;
  border: 2px solid #555;
  border-radius: var(--radius);
  font-size: .55rem;
  position: relative;
}
.tile {
  background: var(--bg2);
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  text-align: center;
  cursor: pointer;
  position: relative;
  overflow: hidden;
  padding: 2px;
  transition: background .15s;
}
.tile:hover { background: #2a2a4e; }
.tile.mortgaged { opacity: .5; }
.tile-corner { font-size: .6rem; font-weight: 700; }
.tile-color-bar {
  position: absolute; top: 0; left: 0; right: 0;
  height: 6px;
}
/* Adjust color bar for left column (tiles 11-19): bar on right side */
.tile[style*="grid-column: 1"]:not(.tile-corner) .tile-color-bar {
  top: 0; bottom: 0; left: auto; right: 0;
  width: 6px; height: auto;
}
/* Right column (tiles 31-39): bar on left side */
.tile[style*="grid-column: 11"]:not(.tile-corner) .tile-color-bar {
  top: 0; bottom: 0; left: 0; right: auto;
  width: 6px; height: auto;
}
/* Top row: bar on bottom */
.tile[style*="grid-row: 1"]:not(.tile-corner) .tile-color-bar {
  top: auto; bottom: 0;
}

.tile-name { font-weight: 600; line-height: 1.1; white-space: pre-line; z-index: 1; margin-top: 4px; }
.tile-price { color: var(--muted); font-size: .5rem; z-index: 1; }
.tile-houses { font-size: .5rem; z-index: 1; letter-spacing: -1px; }
.tile-owner-dot {
  position: absolute; bottom: 2px; right: 2px;
  width: 6px; height: 6px; border-radius: 50%;
}
.tile-players {
  display: flex; gap: 1px; flex-wrap: wrap;
  position: absolute; bottom: 1px; left: 1px;
  z-index: 2;
}
.player-token {
  width: 14px; height: 14px; border-radius: 50%;
  color: #fff; font-size: .5rem; font-weight: 700;
  display: flex; align-items: center; justify-content: center;
  border: 1px solid rgba(255,255,255,.4);
}

/* ===== BOARD CENTER ===== */
.board-center {
  display: flex; align-items: center; justify-content: center;
  background: var(--bg); border-radius: var(--radius);
}
.center-content { text-align: center; padding: 10px; }
.center-content h2 { font-size: 1.2rem; margin-bottom: 8px; }
.dice-display { font-size: 2.5rem; margin: 8px 0; }
.die { margin: 0 4px; }
.last-card { background: var(--surface); padding: 8px; border-radius: var(--radius); margin-top: 8px; max-width: 200px; }
.card-label { font-weight: 700; font-size: .75rem; margin-bottom: 4px; }
.last-card p { font-size: .72rem; }
.winner-banner { font-size: 1.4rem; font-weight: 700; color: #f1c40f; margin-top: 12px; }
.turn-timer { font-size: 1rem; color: var(--accent); margin-top: 6px; font-weight: 700; }

/* ===== ACTION BAR ===== */
.action-bar {
  background: var(--bg2);
  border-radius: var(--radius);
  padding: 10px;
  overflow-y: auto;
}
.actions-section { margin-bottom: 10px; }
.actions-section h4 { font-size: .8rem; color: var(--muted); margin-bottom: 6px; }
.actions-section button { margin: 2px 4px 2px 0; }
.jail-actions, .buy-actions { display: flex; flex-wrap: wrap; gap: 6px; align-items: center; }
.jail-actions p, .buy-actions p { width: 100%; font-size: .82rem; }
.prop-action-list { max-height: 160px; overflow-y: auto; }
.prop-action-row { display: flex; align-items: center; gap: 4px; margin-bottom: 2px; font-size: .75rem; }
.prop-name { min-width: 80px; }
.trade-quick { display: flex; gap: 4px; align-items: center; flex-wrap: wrap; }
.trade-quick input { width: 70px; }
.trade-quick select { max-width: 100px; }

/* ===== CHAT LOG ===== */
.chat-log {
  background: var(--bg2);
  border-radius: var(--radius);
  padding: 10px;
  display: flex; flex-direction: column;
  flex: 1; min-height: 0;
}
.chat-log h4 { font-size: .8rem; color: var(--muted); margin-bottom: 6px; }
.log-scroll { flex: 1; overflow-y: auto; font-size: .72rem; min-height: 0; }
.log-entry { padding: 2px 0; border-bottom: 1px solid rgba(255,255,255,.05); }
.log-system .log-msg { color: var(--muted); font-style: italic; }
.log-action .log-msg { color: #bbb; }
.log-chat .log-msg { color: #3498db; }
.chat-input { display: flex; gap: 4px; margin-top: 6px; }
.chat-input input { flex: 1; }

/* ===== MODAL ===== */
.modal-overlay {
  position: fixed; inset: 0; background: rgba(0,0,0,.6);
  display: flex; align-items: center; justify-content: center;
  z-index: 100;
}

/* ===== PROPERTY CARD ===== */
.property-card {
  background: var(--bg2);
  border-radius: 10px;
  width: 280px;
  overflow: hidden;
}
.pc-color-bar {
  padding: 14px; text-align: center;
  font-weight: 700; font-size: 1rem; color: #fff;
  text-shadow: 0 1px 3px rgba(0,0,0,.5);
}
.pc-header { padding: 14px; text-align: center; font-weight: 700; font-size: 1rem; }
.pc-body { padding: 12px; }
.pc-row { display: flex; justify-content: space-between; font-size: .82rem; padding: 3px 0; }
.pc-divider { border-top: 1px solid #444; margin: 6px 0; }
.pc-special { font-size: .82rem; color: var(--muted); text-align: center; }
.pc-ownership { margin-top: 8px; }
.pc-mortgaged { text-align: center; color: var(--accent); font-weight: 700; margin-top: 4px; }
.property-card .btn-small { display: block; margin: 10px auto; }

/* ===== TRADE DIALOG ===== */
.trade-dialog { background: var(--bg2); border-radius: 10px; padding: 20px; min-width: 340px; }
.trade-dialog h3 { margin-bottom: 10px; }
.trade-details { display: flex; gap: 10px; align-items: flex-start; margin: 14px 0; }
.trade-side { flex: 1; background: var(--surface); padding: 10px; border-radius: var(--radius); }
.trade-side h4 { font-size: .8rem; margin-bottom: 6px; }
.trade-arrow { font-size: 1.5rem; padding-top: 20px; }
.trade-buttons { display: flex; gap: 8px; justify-content: center; }

/* ===== AUCTION ===== */
.auction-dialog { background: var(--bg2); border-radius: 10px; padding: 20px; min-width: 320px; text-align: center; }
.auction-dialog h3 { margin-bottom: 8px; }
.auction-bid { font-size: 1.2rem; margin: 10px 0; }
.auction-controls { display: flex; gap: 8px; justify-content: center; margin-top: 12px; }
.auction-controls input { width: 80px; }

/* ===== RESPONSIVE ===== */
@media (max-width: 900px) {
  .game-middle { flex-direction: column; }
  .sidebar { width: 100%; flex-direction: row; flex-wrap: wrap; }
  .board { width: min(95vw, 500px); height: min(95vw, 500px); font-size: .45rem; }
}
